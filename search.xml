<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>Hello World</title>
    <url>/2022/04/19/18/21/50/</url>
    <content><![CDATA[<p>Welcome to <a href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<span id="more"></span>

<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>
]]></content>
  </entry>
  <entry>
    <title>Markdown</title>
    <url>/2022/04/22/09/17/12/</url>
    <content><![CDATA[<p>Markdown基本语法</p>
]]></content>
      <categories>
        <category>笔记</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
      </tags>
  </entry>
  <entry>
    <title>MySQL基础学习笔记</title>
    <url>/2022/07/17/13/26/20/</url>
    <content><![CDATA[<h1 id="MySQL基础"><a href="#MySQL基础" class="headerlink" title="MySQL基础"></a>MySQL基础</h1><h2 id="认识数据库"><a href="#认识数据库" class="headerlink" title="认识数据库"></a>认识数据库</h2>  <span id="more"></span>

<h3 id="数据库的相关概念"><a href="#数据库的相关概念" class="headerlink" title="数据库的相关概念"></a>数据库的相关概念</h3><h4 id="数据库的好处："><a href="#数据库的好处：" class="headerlink" title="数据库的好处："></a>数据库的好处：</h4><ul>
<li><p>实现数据持久化到本地</p>
</li>
<li><p>使用完整的管理系统统一管理，易于查询</p>
</li>
</ul>
<h4 id="数据库的概念："><a href="#数据库的概念：" class="headerlink" title="数据库的概念："></a>数据库的概念：</h4><ul>
<li><p><strong>DB</strong>：数据库（database）;存储数据的“仓库，它保存了一系列有组织的数据。</p>
</li>
<li><p><strong>DBMS</strong>：数据库管理系统（Database Management System）;数据库是通过DBMS创建和操作的容器。</p>
</li>
<li><p><strong>SQL</strong>：结构化查询语句（Structure Query Language）；专门用来与数据库通信的语言。</p>
<p>​            不是某个数据库软件特有的，而是几乎所有的主流数据库软件通用的语言。</p>
</li>
</ul>
<h4 id="数据库存储数据的特点："><a href="#数据库存储数据的特点：" class="headerlink" title="数据库存储数据的特点："></a>数据库存储数据的特点：</h4><ol>
<li>将数据放到表中，表在放到库中。</li>
<li>一个数据库中可以有多个表，每个表都有一个名字，用来标识自己。表名具有唯一性。</li>
<li>表具有一些特性，这些特性定义了数据在表中如何存储，类似Java中“类”的设计。</li>
<li>表由列组成，他们也称为字段。所有表都是由一个或多个列组成的，每一列类似Java中的“属性”。</li>
<li>表中的数据是按行存储的，每一行类似Java中的“对象”。</li>
</ol>
<h4 id="常见的数据库管理系统："><a href="#常见的数据库管理系统：" class="headerlink" title="常见的数据库管理系统："></a>常见的数据库管理系统：</h4><ul>
<li>MySQL、Oracle、DB2、SqlServer等</li>
</ul>
<h3 id="MySQL的介绍"><a href="#MySQL的介绍" class="headerlink" title="MySQL的介绍"></a>MySQL的介绍</h3><h4 id="MySQL的背景："><a href="#MySQL的背景：" class="headerlink" title="MySQL的背景："></a>MySQL的背景：</h4><ul>
<li>前身属于瑞典的一家公司，MySQL AB</li>
<li>08年被sun公司收购</li>
<li>09年sun公司被oracle公司收购</li>
</ul>
<h4 id="MySQL产品的特点："><a href="#MySQL产品的特点：" class="headerlink" title="MySQL产品的特点："></a>MySQL产品的特点：</h4><ul>
<li>成本低：开放源代码</li>
<li>性能高：执行很快</li>
<li>体积小：很容易安装和使用</li>
</ul>
<h4 id="SQL的优点："><a href="#SQL的优点：" class="headerlink" title="SQL的优点："></a>SQL的优点：</h4><ol>
<li>不是某个特定数据库供应商专有语言，几乎所有DBMS都支持SQL。</li>
<li>简单易学</li>
<li>虽然简单，但实际上是一种强有力的语言，灵活使用其语言元素，可以进行非常复杂和高级的数据库的操作。</li>
</ol>
<h3 id="MySQL的下载安装、配置与使用"><a href="#MySQL的下载安装、配置与使用" class="headerlink" title="MySQL的下载安装、配置与使用"></a>MySQL的下载安装、配置与使用</h3><h4 id="MySQL的下载："><a href="#MySQL的下载：" class="headerlink" title="MySQL的下载："></a>MySQL的下载：</h4><p><a href="https://dev.mysql.com/downloads/mysql/5.5.html#downloads">https://dev.mysql.com/downloads/mysql/5.5.html#downloads</a></p>
<h4 id="MySQL服务的启动和停止："><a href="#MySQL服务的启动和停止：" class="headerlink" title="MySQL服务的启动和停止："></a>MySQL服务的启动和停止：</h4><ol>
<li>右击开始→计算机管理→服务和应用程序→服务</li>
<li>以管理员身份运行<strong>命令提示符</strong><ul>
<li>停止：<code>net stop mysql</code></li>
<li>启动：<code>net start mysql</code></li>
</ul>
</li>
</ol>
<p>MySQL服务端的登陆和退出：</p>
<p><em>登陆之前确保服务是启动的！</em></p>
<ol>
<li><p>登陆：<em>登陆之前确保服务是启动的！</em></p>
<ul>
<li><p>命令提示符 -h主机名 -P端口号 -u用户名 -p密码   <strong>(p和密码之间不能有空格)</strong></p>
<p>​                    <code>mysql -h localhost -P 3306 -u root -p</code></p>
<p>​                    <code>mysql -hlocalhost -P3306 -uroot -p</code>    </p>
</li>
<li><p>开始菜单→MySQL客户端（只限于root用户）</p>
</li>
</ul>
</li>
<li><p>退出：exit 或 Ctrl+C</p>
</li>
</ol>
<h3 id="MySQL的常见命令"><a href="#MySQL的常见命令" class="headerlink" title="MySQL的常见命令"></a>MySQL的常见命令</h3><ol>
<li><p>查看当前所有的数据库        <code>show databases;</code></p>
</li>
<li><p>打开指定的库                       <code>use 库名；</code></p>
</li>
<li><p>查看当前库的所有表            <code>show tables;</code>    </p>
</li>
<li><p>查看其它库的所有表            <code>show tables from 库名；</code></p>
<p>例：</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">use test;</span><br><span class="line"><span class="keyword">show</span> tables;</span><br><span class="line"><span class="keyword">show</span> tables <span class="keyword">from</span> mysql;</span><br><span class="line"></span><br><span class="line">#此时依然在test库里，仅仅是查看了mysql里的表，而没有出去</span><br></pre></td></tr></table></figure></li>
<li><p>查看当前所在库                   <code>show  database();</code></p>
</li>
<li><p>创建表                              </p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名（</span><br><span class="line">列名	列类型，</span><br><span class="line">列名	列类型，</span><br><span class="line">...</span><br><span class="line">);</span><br></pre></td></tr></table></figure></li>
<li><p>查看表结构                            <code>desc 表名；</code></p>
</li>
<li><p>查看表中数据                        <code>select * from 表名；</code></p>
</li>
<li><p>查看当前数据库的版本</p>
<p>方式一：登录到MySQL服务端</p>
<p>​               <code>select version()</code></p>
<p>方式二：没有登录到MySQL服务端</p>
<p>​                <code>mysql --version</code>    或者    <code>mysql -V</code></p>
</li>
</ol>
<h3 id="MySQL语法规范"><a href="#MySQL语法规范" class="headerlink" title="MySQL语法规范"></a>MySQL语法规范</h3><ol>
<li>不区分大小写，但建议关键字大写，表名、列名小写</li>
<li>每行命令最好用分号结尾</li>
<li>每条命令根据需要，可以进行缩进或换行</li>
<li>注释<ol>
<li>单行注释：#注释文字    或者–  注释文字<strong>（–后面必须加空格）</strong></li>
<li>多行注释：<code>/*注释文字*/</code></li>
</ol>
</li>
</ol>
<h2 id="DQL语言的学习"><a href="#DQL语言的学习" class="headerlink" title="DQL语言的学习"></a>DQL语言的学习</h2><h3 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h3><h4 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h4><ol>
<li>查询列表可以是：表中的字段、常量值、表达式、函数</li>
<li>查询的结果是一个虚拟的表格</li>
</ol>
<h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><p>​    select    查询列表    from    表名；</p>
<p>​    查询前先打开数据库        <code>use myemployees;</code></p>
<ol>
<li><p>查询表中的单个字段    <code>select last_name from employees;</code></p>
</li>
<li><p>查询表中多个字段        <code>select last_name,salary,email,from employees;</code></p>
</li>
<li><p>查询表中的所有字段    <code>select * from employees;</code></p>
</li>
<li><p>查询常量值                   <code>select 100;</code>      <code>select &#39;john&#39;;</code></p>
</li>
<li><p>查询表达式                   <code>select 100*98;</code>    </p>
</li>
<li><p>查询函数                       <code>select verson();</code></p>
</li>
<li><p>为字段起别名</p>
<ul>
<li>好处：1、便于理解</li>
</ul>
<p>​    　　        2、如果要查询的字段有重名的情况，使用别名可以区分开来</p>
<ul>
<li><p>方式一：使用as</p>
<p><code>select last_name as 姓，first_name as 名 from employees;</code></p>
</li>
<li><p>方式二：使用空格</p>
<p><code>select last_name 姓,first_name 名 from employees;</code></p>
</li>
<li><p>案例：查询salary,显示结果为 out put</p>
<ul>
<li><p><code>select salary as &#39;out put&#39; from employees; </code></p>
<p><em>当别名中有空格、#等特殊符号时，用引号括起来</em></p>
</li>
</ul>
</li>
</ul>
</li>
<li><p>去重</p>
<p> 查询员工表中涉及到的所有的部门编号                         </p>
<p> <code>select distinct department_id from employees;</code></p>
</li>
<li><p>+的作用</p>
<ul>
<li>mysql中+只有一个功能：运算符</li>
</ul>
<ol>
<li>两个操作数都为数值型，则做加法运算    <code>select 100+90;</code></li>
<li>其中一方为字符型，试图将字符型数值转换成数值型<ul>
<li>如果转换成功，则继续做加法运算    <code>select &#39;123&#39;+90;</code>　结果为213</li>
<li>如果转换失败，则将字符型数值转换成0    <code>select &#39;john&#39;+90;</code>　结果为90</li>
</ul>
</li>
<li>只要其中一方为null,则结果肯定为null</li>
</ol>
<p>【补充】concat函数　　　功能：拼接字符</p>
<p>案例：查询员工名和姓连接成一个字段，并显示为 姓名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	concat(last_name,first_name) <span class="keyword">as</span> 姓名</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h3><h4 id="语法-1"><a href="#语法-1" class="headerlink" title="语法"></a>语法</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	查询列表</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	表名</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	筛选条件；</span><br><span class="line"></span><br><span class="line"> #执行顺序：<span class="keyword">from</span>——<span class="keyword">where</span>——<span class="keyword">select</span></span><br></pre></td></tr></table></figure>

<h4 id="分类"><a href="#分类" class="headerlink" title="分类"></a>分类</h4><ol>
<li><h5 id="按条件表达式筛选"><a href="#按条件表达式筛选" class="headerlink" title="按条件表达式筛选"></a>按条件表达式筛选</h5><ul>
<li><p>简单的条件运算符：&gt;    &lt;    =    !=    &lt;&gt;    &gt;=    &lt;=</p>
</li>
<li><p>案例一：查询工资大于12000的员工信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	<span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	salary<span class="operator">&gt;</span><span class="number">12000</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>案例二：查询部门编号不等于90号的员工名和部门编号</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	last_name,</span><br><span class="line">	department_id</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	department_id<span class="operator">&lt;&gt;</span><span class="number">90</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><h5 id="按逻辑表达式筛选："><a href="#按逻辑表达式筛选：" class="headerlink" title="按逻辑表达式筛选："></a>按逻辑表达式筛选：</h5><ul>
<li><p>逻辑运算符： and    or    not                作用：用于连接条件表达式</p>
</li>
<li><p>案例一：查询工资在10000到20000之间的员工名、工资以及奖金</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	last_name,</span><br><span class="line">	salary,</span><br><span class="line">	commission_pct</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	salary<span class="operator">&gt;=</span><span class="number">10000</span> <span class="keyword">and</span> salary<span class="operator">&lt;=</span><span class="number">20000</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>案例二： 查询部门编号不是在90到110之间，或者工资高于150000的员工信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	<span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	<span class="keyword">not</span>(department_id<span class="operator">&gt;=</span><span class="number">90</span> <span class="keyword">and</span> department_id<span class="operator">&lt;=</span><span class="number">110</span>) <span class="keyword">or</span> salary<span class="operator">&gt;</span><span class="number">15000</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
<li><h5 id="模糊查询"><a href="#模糊查询" class="headerlink" title="模糊查询"></a>模糊查询</h5><ul>
<li><p>like</p>
<ul>
<li><p>特点：一般和通配符搭配使用</p>
<p>通配符：</p>
<p>​            %表示任意多个字符，包含0个字符</p>
<p>​            _表示任意单个字符</p>
</li>
</ul>
<p>案例一：查询员工名中包含字符a的员工信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	<span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	last_name <span class="keyword">like</span> <span class="string">&#x27;%a%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>案例二：查询员工名中第三个字符为e，第五个字符为a的员工名和工资</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	last_name,</span><br><span class="line">	salary</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	last_name <span class="keyword">like</span> <span class="string">&#x27;__e_a%&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>案例三：查询员工名中第二个字符为_的员工名</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	last_name,</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	last_name <span class="keyword">like</span> <span class="string">&#x27;_\_%&#x27;</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>between and</p>
<ul>
<li>可以提高语句简洁度</li>
<li>包含两个临界值</li>
<li>两个临界值不要调换顺序</li>
</ul>
<p>案例：查询员工编号在100到120之间的员工信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	<span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	employee_id <span class="keyword">between</span> <span class="number">100</span> <span class="keyword">and</span> <span class="number">120</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>in</p>
<ul>
<li>含义：判断某字段的值是否属于in列表中的某一项</li>
<li>特点：<ol>
<li>使用in提高了语句简洁度</li>
<li>in列表的值必须一致或兼容</li>
<li>不能包含_和%</li>
</ol>
</li>
</ul>
<p>案例：查询员工的工种编号是IT_PROT,AD_VP,AD_PRES中的一个员工名和工种编号</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	last_name,</span><br><span class="line">	job_id</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	job_id <span class="keyword">in</span>(<span class="string">&#x27;IT_PROT&#x27;</span>,<span class="string">&#x27;AD_VP&#x27;</span>,<span class="string">&#x27;AD_PRES&#x27;</span>);</span><br></pre></td></tr></table></figure></li>
<li><p>is null</p>
<ul>
<li>=或&lt;&gt;不能用于判断null值，is null 或 is not null可以判断null值</li>
</ul>
<p>案例一：查询没有奖金的员工名和奖金率</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	last_name,</span><br><span class="line">	commission_pct</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	commission_pct <span class="keyword">is</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure></li>
<li><p>安全等于      &lt;=&gt;</p>
<ul>
<li>is null 仅可以判断null值</li>
<li>&lt;=&gt;既可以判断null值，又可以判断普通的值，可读性较低</li>
</ul>
<p>案例一：查询没有奖金的员工名和奖金率</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	last_name,</span><br><span class="line">	commission_pct</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	commission_pct <span class="keyword">is</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>

<p>案例二：查询工资为12000的员工信息</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	last_name,</span><br><span class="line">	salary</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	salary <span class="operator">&lt;=&gt;</span> <span class="number">12000</span>;</span><br></pre></td></tr></table></figure></li>
</ul>
<p>【补充】ifnull函数</p>
<p>​    ifnull(commission_pct,0)    如果commission_pct值为null，则值为0</p>
<p>  案例：查询员工号为176的员工的姓名、部门号和年薪</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	last_name,</span><br><span class="line">	department_id,</span><br><span class="line">	salary<span class="operator">*</span><span class="number">12</span><span class="operator">*</span>(<span class="number">1</span><span class="operator">+</span>iffnull(commission_pct,<span class="number">0</span>)) <span class="keyword">as</span> 年薪</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line">wwhere</span><br><span class="line">	employee_id <span class="operator">=</span><span class="number">176</span>;</span><br></pre></td></tr></table></figure>

<p>【补充】isnull函数</p>
<p>​    功能：判断某字段或表达式是否为null，如果是返回为1，否则返回0</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> </span><br><span class="line">	isnull (commission_pct) </span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees;</span><br></pre></td></tr></table></figure>



<h5 id="经典面试题"><a href="#经典面试题" class="headerlink" title="经典面试题"></a>经典面试题</h5><p>试问：<code>select*from employees;</code>    和</p>
<p><code>select * from employees where commission_pct like &#39;%%&#39; and last_name like &#39;%%&#39;</code></p>
<p>结果是否一样？并说明原因</p>
<p>不一样！如果判断的字段有null值，结果就不一样；如果没有null值，结果就一样</p>
</li>
</ol>
<h3 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h3><h4 id="语法-2"><a href="#语法-2" class="headerlink" title="语法"></a>语法</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	查询列表</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	表名</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	筛选条件</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">	排序列表 <span class="keyword">asc</span><span class="operator">/</span><span class="keyword">desc</span>;</span><br><span class="line">	</span><br><span class="line">#执行顺序：<span class="keyword">from</span>——<span class="keyword">where</span>——<span class="keyword">select</span>——<span class="keyword">order</span> <span class="keyword">by</span></span><br></pre></td></tr></table></figure>

<h4 id="特点-1"><a href="#特点-1" class="headerlink" title="特点"></a>特点</h4><ol>
<li>asc代表的是升序，desc代表的是降序；如果不写默认是升序</li>
<li>order by 子句中可以支持单个字段、多个字段、表达式、函数、别名</li>
<li>order by 子句一般是放在查询语句的最后面，limit子句除外</li>
</ol>
<p>案例一：查询员工信息，要求按工资排序</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employees <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span>;	#从高到低</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employees <span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">asc</span>;	#从低到高</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employees <span class="keyword">order</span> <span class="keyword">by</span> salary;		#从低到高</span><br></pre></td></tr></table></figure>

<p>案例二：【添加筛选条件】查询部门编号大于等于90的员工信息，按入职时间的先后顺序排序</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	<span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">where</span></span><br><span class="line">	department_id<span class="operator">&gt;=</span><span class="number">90</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">	hiredate <span class="keyword">asc</span>;</span><br></pre></td></tr></table></figure>

<p>案例三：【按表达式排序】按年薪的高低显示员工的信息和年薪</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	<span class="operator">*</span>,</span><br><span class="line">	salary<span class="operator">*</span><span class="number">12</span><span class="operator">*</span>(<span class="number">1</span><span class="operator">+</span>ifnull(commission_pct,<span class="number">0</span>)) <span class="keyword">as</span> 年薪</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">	salary<span class="operator">*</span><span class="number">12</span><span class="operator">*</span>(<span class="number">1</span><span class="operator">+</span>ifnull(commission_pct,<span class="number">0</span>)) <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<p>案例四：【按别名排序】按年薪的高低显示员工的信息和年薪</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	<span class="operator">*</span>,</span><br><span class="line">	salary<span class="operator">*</span><span class="number">12</span><span class="operator">*</span>(<span class="number">1</span><span class="operator">+</span>ifnull(commission_pct,<span class="number">0</span>)) <span class="keyword">as</span> 年薪</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">	年薪 <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<p>案例五：【按函数排序】按姓名的长度显示员工的姓名和工资</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	length(last_name) <span class="keyword">as</span> 字节长度，</span><br><span class="line">	last_name,</span><br><span class="line">	salary</span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> </span><br><span class="line">	length(last_name) <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>

<p>案例六：【按多个字段排序】查询员工信息，要求先按工资升序，再按员工编号降序</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span></span><br><span class="line">	<span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span></span><br><span class="line">	employees</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span></span><br><span class="line">	salary <span class="keyword">asc</span>,</span><br><span class="line">	employee_id <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>



<h3 id="常见函数"><a href="#常见函数" class="headerlink" title="常见函数"></a>常见函数</h3><p>概念：类似于Java中的方法，将一组逻辑语句封装在方法体中，对外暴露方法名</p>
<p>好处：</p>
<ol>
<li>隐藏了细节</li>
<li>提高代码的重用性</li>
</ol>
<p>调用：select函数名（实参列表）；</p>
<p>特点：</p>
<ol>
<li>叫什么（函数名）</li>
<li>干什么（函数功能）</li>
</ol>
<p>分类：</p>
<ol>
<li>单行函数：如 concat、length、ifnull等</li>
<li>分组函数：做统计使用，又称为统计函数、聚合函数、组函数</li>
</ol>
<h4 id="单行函数"><a href="#单行函数" class="headerlink" title="单行函数"></a>单行函数</h4><h5 id="字符函数"><a href="#字符函数" class="headerlink" title="字符函数"></a>字符函数</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#<span class="number">1</span>、length	获取参数值的字节个数</span><br><span class="line"><span class="keyword">select</span> length (<span class="string">&#x27;john&#x27;</span>)	#返回值<span class="number">4</span></span><br><span class="line"><span class="keyword">select</span> length (<span class="string">&#x27;张三丰hahaha&#x27;</span>)	#返回值<span class="number">15</span></span><br><span class="line"></span><br><span class="line">#<span class="number">2</span>、concat	拼接字符串</span><br><span class="line"><span class="keyword">select</span> concat(last_name,<span class="string">&#x27;_&#x27;</span>,first_name) 姓名 <span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line">#<span class="number">3</span>、upper、lower</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">upper</span>(<span class="string">&#x27;john&#x27;</span>);	#返回值JOHN</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">lower</span>(<span class="string">&#x27;joHn&#x27;</span>);	#返回值john</span><br><span class="line">#案例：将姓变大写，名变小写，然后拼接</span><br><span class="line"><span class="keyword">select</span> concat(<span class="built_in">upper</span>(last_name),<span class="built_in">lower</span>(first_name)) 姓名 <span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line">#<span class="number">4</span>、substr(substring)</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">注意：索引从1开始</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">#截取从指定索引处后面所有字符</span><br><span class="line"><span class="keyword">select</span> substr (<span class="string">&#x27;李莫愁爱上了陆展元&#x27;</span>，<span class="number">7</span>) out_put;	#陆展元</span><br><span class="line"></span><br><span class="line">#截取从指定索引处指定字符长度的字符</span><br><span class="line"><span class="keyword">select</span> substr (<span class="string">&#x27;李莫愁爱上了陆展元&#x27;</span>，<span class="number">1</span>，<span class="number">3</span>) out_put;	#李莫愁</span><br><span class="line"></span><br><span class="line">#案例：姓名中首字符大写，其他字符小写，然后用_拼接，显示出来</span><br><span class="line"><span class="keyword">select</span> concat(<span class="built_in">upper</span>(substr(last_name,<span class="number">1</span>,<span class="number">1</span>)),<span class="string">&#x27;_&#x27;</span>,<span class="built_in">lower</span>(substr(last_name,<span class="number">2</span>))) out_put <span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line">#<span class="number">5</span>、instr 返回子串第一次出现的索引，如果找不到返回<span class="number">0</span></span><br><span class="line"><span class="keyword">select</span> instr(<span class="string">&#x27;杨不悔爱上了殷六侠&#x27;</span>,<span class="string">&#x27;殷六侠&#x27;</span>)		#<span class="number">7</span></span><br><span class="line"><span class="keyword">select</span> instr(<span class="string">&#x27;杨不殷六侠悔爱上了殷六侠&#x27;</span>,<span class="string">&#x27;殷六侠&#x27;</span>)		#<span class="number">3</span></span><br><span class="line"><span class="keyword">select</span> instr(<span class="string">&#x27;杨不悔爱上了殷六侠&#x27;</span>,<span class="string">&#x27;殷八侠&#x27;</span>)		#<span class="number">0</span></span><br><span class="line"></span><br><span class="line">#<span class="number">6</span>、trim</span><br><span class="line"><span class="keyword">select</span> length(<span class="built_in">trim</span>(<span class="string">&#x27;   张翠山    &#x27;</span>)) <span class="keyword">as</span> out_put;	#<span class="number">9</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">trim</span>(<span class="string">&#x27;a&#x27;</span> <span class="keyword">from</span> <span class="string">&#x27;aaaaaa张a翠a山aaaaa&#x27;</span>) <span class="keyword">as</span> out_put;	#张a翠a山</span><br><span class="line"></span><br><span class="line">#<span class="number">7</span>、lpad 用指定的字符实现左填充指定长度</span><br><span class="line"><span class="keyword">select</span> lpad(<span class="string">&#x27;殷素素&#x27;</span>,<span class="number">10</span>,<span class="string">&#x27;*&#x27;</span>) <span class="keyword">as</span> out_put;	#<span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span><span class="operator">*</span>殷素素</span><br><span class="line"><span class="keyword">select</span> lpad(<span class="string">&#x27;殷素素&#x27;</span>,,<span class="string">&#x27;*&#x27;</span>) <span class="keyword">as</span> out_put;	#殷素</span><br><span class="line"></span><br><span class="line">#<span class="number">8</span>、rpad 用指定的字符实现右填充指定长度</span><br><span class="line"><span class="keyword">select</span> rpad(<span class="string">&#x27;殷素素&#x27;</span>,<span class="number">12</span>,<span class="string">&#x27;ab&#x27;</span>) <span class="keyword">as</span> out_put;	#殷素素ababababa</span><br><span class="line"></span><br><span class="line">#<span class="number">9</span>、replace替换</span><br><span class="line"><span class="keyword">select</span> replace(<span class="string">&#x27;张无忌爱上了周芷若&#x27;</span>,<span class="string">&#x27;周芷若&#x27;</span>,<span class="string">&#x27;赵敏&#x27;</span>) <span class="keyword">as</span> out_put;	#张无忌爱上了赵敏</span><br><span class="line"><span class="keyword">select</span> replace(<span class="string">&#x27;周芷若张无忌爱上了周芷若&#x27;</span>,<span class="string">&#x27;周芷若&#x27;</span>,<span class="string">&#x27;赵敏&#x27;</span>) <span class="keyword">as</span> out_put;	#赵敏张无忌爱上了赵敏</span><br></pre></td></tr></table></figure>



<h5 id="数学函数"><a href="#数学函数" class="headerlink" title="数学函数"></a>数学函数</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#round 四舍五入</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> round(<span class="number">1.65</span>);	#<span class="number">2</span></span><br><span class="line"><span class="keyword">select</span> round(<span class="number">1.567</span>,<span class="number">2</span>);	#<span class="number">2</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#ceil 向上取整，返回大于等于该参数的最小整数</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">ceil</span>(<span class="number">1.002</span>);	#<span class="number">2</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">ceil</span>(<span class="number">1.00</span>);	#<span class="number">1</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">ceil</span>(<span class="number">-1.02</span>);	#<span class="number">-1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#floor 向下取整，返回小于等于该参数的最大整数</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">floor</span>(<span class="number">9.99</span>);	#<span class="number">9</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">floor</span>(<span class="number">-9.99</span>);	#<span class="number">-10</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#<span class="keyword">truncate</span> 截断</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="keyword">truncate</span>(<span class="number">1.69</span>,<span class="number">1</span>);	#<span class="number">1.6</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">#mod 取余</span><br><span class="line"></span><br><span class="line"><span class="built_in">mod</span>(a,b):	a<span class="operator">-</span>a<span class="operator">/</span>b<span class="operator">*</span>b</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">mod</span>(<span class="number">10</span>,<span class="number">3</span>);	#<span class="number">1</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">mod</span>(<span class="number">-10</span>,<span class="number">-3</span>);	#<span class="number">-1</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">mod</span>(<span class="number">-10</span>,<span class="number">3</span>);	#<span class="number">-1</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">mod</span>(<span class="number">10</span>,<span class="number">-3</span>);	#<span class="number">1</span></span><br><span class="line"></span><br><span class="line">#rand 获取随机数返回<span class="number">0</span><span class="number">-1</span>之间的小数</span><br></pre></td></tr></table></figure>



<h5 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#now 返回当前系统日期<span class="operator">+</span>时间</span><br><span class="line"><span class="keyword">select</span> now();</span><br><span class="line"></span><br><span class="line">#curdate 返回当前系统日期，不包含时间</span><br><span class="line"><span class="keyword">select</span> curdate();</span><br><span class="line"></span><br><span class="line">#curtime 返回当前时间，不包含日期</span><br><span class="line"><span class="keyword">select</span> curtime();</span><br><span class="line"></span><br><span class="line">#可以获取指定的部分，年、月、日、小时、分钟、秒</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>(now()) 年；</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>(<span class="string">&#x27;1998-1-1&#x27;</span>) 年；</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">year</span>(hiredate)年 <span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">month</span>(now()) 月；</span><br><span class="line"><span class="keyword">select</span> monthname(now()) 月； #返回英文月份</span><br><span class="line"></span><br><span class="line">#str_to_date 将字符通过指定的格式转换成日期</span><br><span class="line"><span class="keyword">select</span> str_to_date(<span class="string">&#x27;1998-3-2&#x27;</span>,<span class="string">&#x27;%Y-%c-%d&#x27;</span>) <span class="keyword">as</span> out_put;</span><br><span class="line"></span><br><span class="line">#查询入职日期为<span class="number">1992</span><span class="number">-4</span><span class="number">-3</span>的员工信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employees <span class="keyword">where</span> hiredate <span class="operator">=</span> <span class="string">&#x27;1992-4-3&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employees <span class="keyword">where</span> hiredate <span class="operator">=</span> str_to_date(<span class="string">&#x27;4-3 1992&#x27;</span>,<span class="string">&#x27;%c-%d %Y&#x27;</span>);</span><br><span class="line"></span><br><span class="line">#date_format 将日期转换成字符</span><br><span class="line"><span class="keyword">select</span> date_format(now(),<span class="string">&#x27;%y年%m月%d日&#x27;</span>) <span class="keyword">as</span> out_put;</span><br><span class="line"></span><br><span class="line">#查询有奖金的员工名和入职日期（xx月<span class="operator">/</span>xx日 xx年）</span><br><span class="line"><span class="keyword">select</span> last_name,date_format(hiredate,<span class="string">&#x27;%m月/%d日 %y年&#x27;</span>) 入职日期</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">#datediff 返回两个日期相差的天数</span><br><span class="line"></span><br><span class="line">#monthname 以英文形式返回月</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>序号</th>
<th>格式符</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>%Y</td>
<td>四位的年份</td>
</tr>
<tr>
<td>2</td>
<td>%y</td>
<td>两位的年份</td>
</tr>
<tr>
<td>3</td>
<td>%m</td>
<td>月份（01，02…11，12）</td>
</tr>
<tr>
<td>4</td>
<td>%c</td>
<td>月份（1，2，…11，12）</td>
</tr>
<tr>
<td>5</td>
<td>%d</td>
<td>日（01，02，…）</td>
</tr>
<tr>
<td>6</td>
<td>%H</td>
<td>小时（24小时制）</td>
</tr>
<tr>
<td>7</td>
<td>%h</td>
<td>小时（12小时制）</td>
</tr>
<tr>
<td>8</td>
<td>%i</td>
<td>分钟（00，01…59）</td>
</tr>
<tr>
<td>9</td>
<td>%s</td>
<td>秒（00，01，…59）</td>
</tr>
</tbody></table>
<h5 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> version();	#当前数据库服务器的版本</span><br><span class="line"><span class="keyword">select</span> database();	#当前打开的数据库</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">user</span>();	#当前用户</span><br><span class="line"><span class="keyword">select</span> password(<span class="string">&#x27;字符&#x27;</span>)；	#返回该字符的密码形式</span><br><span class="line"><span class="keyword">select</span> md5(<span class="string">&#x27;字符&#x27;</span>)；	#返回该字符的md5加密形式</span><br></pre></td></tr></table></figure>



<h5 id="流程控制函数"><a href="#流程控制函数" class="headerlink" title="流程控制函数"></a>流程控制函数</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#<span class="number">1.</span> if 函数：if <span class="keyword">else</span>效果</span><br><span class="line"><span class="keyword">select</span> if(<span class="number">10</span><span class="operator">&lt;</span><span class="number">5</span>,<span class="string">&#x27;大&#x27;</span>，<span class="string">&#x27;小&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> last_name,commission_pct,if(commission_pct <span class="keyword">is</span> <span class="keyword">null</span>,<span class="string">&#x27;没奖金&#x27;</span>,<span class="string">&#x27;有奖金&#x27;</span>) 备注</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line">#<span class="number">2.</span> <span class="keyword">case</span>函数的使用一：switch <span class="keyword">case</span> 的效果</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">java中</span></span><br><span class="line"><span class="comment">switch(变量或表达式)&#123;</span></span><br><span class="line"><span class="comment">		case 常量1：语句1；break;</span></span><br><span class="line"><span class="comment">		...</span></span><br><span class="line"><span class="comment">		default:语句n;break;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">mysql中</span></span><br><span class="line"><span class="comment">case 要判断的字段或表达式</span></span><br><span class="line"><span class="comment">when 常量1 then 要显示的值1或语句1；</span></span><br><span class="line"><span class="comment">when 常量2 then 要显示的值2或语句2；</span></span><br><span class="line"><span class="comment">...</span></span><br><span class="line"><span class="comment">else 要显示的值n或语句n；</span></span><br><span class="line"><span class="comment">end</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">案例：查询员工的工资，要求：</span></span><br><span class="line"><span class="comment">部门号=30，显示的工资为1.1倍</span></span><br><span class="line"><span class="comment">部门号=40，显示的工资为1.2倍</span></span><br><span class="line"><span class="comment">部门号=50，显示的工资为1.3倍</span></span><br><span class="line"><span class="comment">其他部门，显示的工资为原工资</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> salary 原始工资,department_id,</span><br><span class="line"><span class="keyword">case</span> department_id</span><br><span class="line"><span class="keyword">when</span> <span class="number">30</span> <span class="keyword">then</span> salary<span class="operator">*</span><span class="number">1.1</span></span><br><span class="line"><span class="keyword">when</span> <span class="number">40</span> <span class="keyword">then</span> salary<span class="operator">*</span><span class="number">1.2</span></span><br><span class="line"><span class="keyword">when</span> <span class="number">50</span> <span class="keyword">then</span> salary<span class="operator">*</span><span class="number">1.3</span></span><br><span class="line"><span class="keyword">else</span> salary</span><br><span class="line"><span class="keyword">end</span> <span class="keyword">as</span> 新工资</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line">#<span class="number">3.</span> <span class="keyword">case</span>函数的使用二：类似于多重if</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">java中</span></span><br><span class="line"><span class="comment">if (条件1)&#123;</span></span><br><span class="line"><span class="comment">		语句1；</span></span><br><span class="line"><span class="comment">&#125;else if(条件2)&#123;</span></span><br><span class="line"><span class="comment">		语句2；</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">...</span></span><br><span class="line"><span class="comment">else&#123;</span></span><br><span class="line"><span class="comment">		语句n;</span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">mysql中</span></span><br><span class="line"><span class="comment">case </span></span><br><span class="line"><span class="comment">when 条件1 then 要显示的值1或语句1；</span></span><br><span class="line"><span class="comment">when 条件2 then 要显示的值2或语句2；</span></span><br><span class="line"><span class="comment">...</span></span><br><span class="line"><span class="comment">else 要显示的值n或语句n；</span></span><br><span class="line"><span class="comment">end</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">案例：查询员工的工资情况</span></span><br><span class="line"><span class="comment">如果工资&gt;20000,显示A级别</span></span><br><span class="line"><span class="comment">如果工资&gt;15000,显示B级别</span></span><br><span class="line"><span class="comment">如果工资&gt;10000,显示C级别</span></span><br><span class="line"><span class="comment">否则，显示D级别</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">select</span> salary,</span><br><span class="line"><span class="keyword">case</span></span><br><span class="line"><span class="keyword">when</span> salary<span class="operator">&gt;</span><span class="number">20000</span> <span class="keyword">then</span> <span class="string">&#x27;A&#x27;</span></span><br><span class="line"><span class="keyword">when</span> salary<span class="operator">&gt;</span><span class="number">15000</span> <span class="keyword">then</span> <span class="string">&#x27;B&#x27;</span></span><br><span class="line"><span class="keyword">when</span> salary<span class="operator">&gt;</span><span class="number">10000</span> <span class="keyword">then</span> <span class="string">&#x27;C&#x27;</span></span><br><span class="line"><span class="keyword">else</span> <span class="string">&#x27;D&#x27;</span></span><br><span class="line"><span class="keyword">end</span> <span class="keyword">as</span> 工资级别</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="分组函数"><a href="#分组函数" class="headerlink" title="分组函数"></a>分组函数</h4><h5 id="功能"><a href="#功能" class="headerlink" title="功能"></a>功能</h5><p>用作统计使用，又称为聚合函数或统计函数或组函数</p>
<h5 id="分类-1"><a href="#分类-1" class="headerlink" title="分类"></a>分类</h5><p>​        sum 求和、avg 平均值、max 最大值、min 最小值、count 计算个数</p>
<h5 id="特点-2"><a href="#特点-2" class="headerlink" title="特点"></a>特点</h5><ol>
<li><p>sum、avg一般用于处理数值型</p>
<p>max、min、count可以处理任何类型</p>
</li>
<li><p>以上分组函数都忽略null值</p>
</li>
<li><p>可以和distinct搭配实现去重的运算</p>
</li>
<li><p>count函数的单独介绍</p>
<p>一般使用count(*)用作统计行数</p>
</li>
<li><p>和分组函数一同查询的字段要求是group by后的字段</p>
</li>
</ol>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#<span class="number">1.</span>简单的使用</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(salary) <span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(salary) <span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(salary) <span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(salary) <span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(salary) <span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(salary) 和,round(<span class="built_in">avg</span>(salary),<span class="number">2</span>) 平均,<span class="built_in">max</span>(salary) 最高,<span class="built_in">min</span>(salary) 最低,<span class="built_in">count</span>(salary) 个数</span><br><span class="line"><span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line">#<span class="number">3.</span>可以和<span class="keyword">distinct</span>搭配实现去重的运算</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">sum</span>(<span class="keyword">distinct</span> salary),<span class="built_in">sum</span>(salary) <span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="keyword">distinct</span> salary),<span class="built_in">count</span>(salary) <span class="keyword">from</span> employees;</span><br><span class="line"></span><br><span class="line">#<span class="number">4.</span>count 函数的具体介绍</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(salary) <span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">from</span> employees;</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="number">1</span>) <span class="keyword">from</span> employees;</span><br></pre></td></tr></table></figure>



<h3 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h3><h4 id="语法-3"><a href="#语法-3" class="headerlink" title="语法"></a>语法</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">select 分组函数，列（要求要求出现在group by 的后面）</span></span><br><span class="line"><span class="comment">from表</span></span><br><span class="line"><span class="comment">[where 筛选条件]</span></span><br><span class="line"><span class="comment">group by 分组的列表</span></span><br><span class="line"><span class="comment">[order by 子句]</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">注意：查询列表必较特殊，要求是分组函数group by 后面出现的字段</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">		</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<h4 id="特点-3"><a href="#特点-3" class="headerlink" title="特点"></a>特点</h4><ol>
<li><p>分组查询中筛选条件分为两类</p>
<table>
<thead>
<tr>
<th></th>
<th>数据源</th>
<th>位置</th>
<th>关键字</th>
</tr>
</thead>
<tbody><tr>
<td>分组前筛选</td>
<td>原始表</td>
<td>group by 子句的前面</td>
<td>where</td>
</tr>
<tr>
<td>分组后筛选</td>
<td>分组后的结果集</td>
<td>group by 子句的后面</td>
<td>having</td>
</tr>
</tbody></table>
<p>①分组函数做条件肯定是放在having子句中</p>
<p>②能用分组前筛选的，就优先考虑分组前筛选</p>
</li>
<li><p>group by 子句支持单个字段分组，多个字段分组（多个字段用逗号隔开没有顺序），表达式或函数（用的较少）</p>
</li>
<li><p>也可以添加排序（排序放在整个分组查询的最后）</p>
</li>
</ol>
<h4 id="案例"><a href="#案例" class="headerlink" title="案例"></a>案例</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#简单的分组查询</span><br><span class="line"></span><br><span class="line">#案例<span class="number">1</span>；查询每个工种的最高工资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(salary),job_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> job_id;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>；查询每个位置上的部门个数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),location_id</span><br><span class="line"><span class="keyword">from</span> departments</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> location_id;</span><br><span class="line"></span><br><span class="line">#添加分组前筛选条件</span><br><span class="line"></span><br><span class="line">#案例<span class="number">1</span>；查询邮箱中包含a字符的，每个部门的平均工资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(salary),department_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> email <span class="keyword">like</span> <span class="string">&#x27;%a%&#x27;</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>；查询有奖金的每个领导手下员工的最高工资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(salary),manager_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> manager_id;</span><br><span class="line"></span><br><span class="line">#添加分组后的筛选条件</span><br><span class="line"></span><br><span class="line">#案例<span class="number">1</span>；查询哪个部门的员工个数大于<span class="number">2</span></span><br><span class="line"></span><br><span class="line">#①查询每个部门的员工个数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),department_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id</span><br><span class="line">#②根据①的结果进行筛选，查询哪个部门员工个数大于<span class="number">2</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),department_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">2</span>;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>；查询每个工种有奖金的员工的最高工资<span class="operator">&gt;</span><span class="number">12000</span>的工种编号和最高工资</span><br><span class="line"></span><br><span class="line">#①查询每个工种有奖金的员工的最高工资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(salary),job_id</span><br><span class="line"><span class="keyword">from</span> eemployees</span><br><span class="line"><span class="keyword">where</span> commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> job_id;</span><br><span class="line"></span><br><span class="line">#②根据①结果继续筛选，最高工资<span class="operator">&gt;</span><span class="number">12000</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(salary),job_id</span><br><span class="line"><span class="keyword">from</span> eemployees</span><br><span class="line"><span class="keyword">where</span> commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span> </span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> job_id</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">max</span>(salary)<span class="operator">&gt;</span><span class="number">12000</span>;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">3</span>；查询领导编号<span class="operator">&gt;</span><span class="number">102</span>的每个领导手下的最低工资<span class="operator">&gt;</span><span class="number">5000</span>的领导编号是哪个，以及其最低工资</span><br><span class="line"></span><br><span class="line">#①查询每个领导手下的员工的最低工资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(salary),manager_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> manager_id</span><br><span class="line">#②添加筛选条件：编号<span class="operator">&gt;</span><span class="number">102</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(salary),manager_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> manager_id<span class="operator">&gt;</span><span class="number">102</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> manager_id</span><br><span class="line">#③添加筛选条件：最低工资<span class="operator">&gt;</span><span class="number">5000</span></span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(salary),manager_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> manager_id<span class="operator">&gt;</span><span class="number">102</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> manager_id</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">min</span>(salary<span class="operator">&gt;</span><span class="number">5000</span>);</span><br><span class="line"></span><br><span class="line">#按表达式或函数分组</span><br><span class="line"></span><br><span class="line">#案例：按员工姓名的长度分组，查询每一组的员工个数，筛选员工个数<span class="operator">&gt;</span><span class="number">5</span>的有哪些</span><br><span class="line">#①</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),length(last_name) len_name</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> length(last_name);</span><br><span class="line">#②添加筛选条件</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>),length(last_name) len_name</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> length(last_name)</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">#按多个字段分组</span><br><span class="line"></span><br><span class="line">#案例：查询每个部门每个工种的员工的平均工资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(salary),department_id,job_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id,job_id;</span><br><span class="line"></span><br><span class="line">#添加排序</span><br><span class="line"></span><br><span class="line">#案例：查询每个部门每个工种的员工的平均工资，并且按平均工资的高低显示</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(salary),department_id,job_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> department_id <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id,job_id;</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">avg</span>(salary) <span class="keyword">desc</span>;</span><br></pre></td></tr></table></figure>



<h3 id="连接查询"><a href="#连接查询" class="headerlink" title="连接查询"></a>连接查询</h3><h4 id="含义"><a href="#含义" class="headerlink" title="含义"></a>含义</h4><p>连接查询又称多表查询，当查询的字段来自多个表时，就会用到多表查询</p>
<h4 id="笛卡尔积"><a href="#笛卡尔积" class="headerlink" title="笛卡尔积"></a>笛卡尔积</h4><p>现象：表1有m行，表2有n行，，结果=m*n行</p>
<p>发生原因：没有有效的连接条件</p>
<p>如何避免：添加有效的连接条件</p>
<h4 id="分类-2"><a href="#分类-2" class="headerlink" title="分类"></a>分类</h4><h5 id="按年代分类"><a href="#按年代分类" class="headerlink" title="按年代分类"></a>按年代分类</h5><ul>
<li>sql92标准：仅仅支持内连接，也支持一部分外连接（用于oracle、sqlserver)</li>
<li>sql99标准【推荐】：支持内连接+外连接（左外和右外）+交叉连接</li>
</ul>
<h5 id="按功能分类"><a href="#按功能分类" class="headerlink" title="按功能分类"></a>按功能分类</h5><ul>
<li>内连接<ul>
<li>等值连接</li>
<li>非等值连接</li>
<li>自连接</li>
</ul>
</li>
<li>外连接<ul>
<li>左外连接</li>
<li>右外连接</li>
<li>全外连接(mysql不支持)</li>
</ul>
</li>
<li>交叉连接</li>
</ul>
<h4 id="一、sql92标准"><a href="#一、sql92标准" class="headerlink" title="一、sql92标准"></a>一、sql92标准</h4><h5 id="等值连接"><a href="#等值连接" class="headerlink" title="等值连接"></a>等值连接</h5><p>语法</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">select 查询列表</span></span><br><span class="line"><span class="comment">from 表1 别名，表2 别名</span></span><br><span class="line"><span class="comment">where 表1.key=表2.key</span></span><br><span class="line"><span class="comment">[and 筛选条件]</span></span><br><span class="line"><span class="comment">[group by 分组字段]</span></span><br><span class="line"><span class="comment">[having 分组后的筛选]</span></span><br><span class="line"><span class="comment">[order by 排序字段]</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>

<p>①多表等值连接的结果为多表的交集部分<br>②n表连接，至少需要n-1个连接条件<br>③多表的顺序没有要求<br>④一般需要为多表起别名<br>⑤可以搭配前面介绍的所有子句使用，比如排序、分组、筛选</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#<span class="number">1.</span>等值连接</span><br><span class="line">#案例<span class="number">1</span>：查询女神名和对应的男神名</span><br><span class="line"><span class="keyword">select</span> NAME,boyName</span><br><span class="line"><span class="keyword">from</span> boys,beauty</span><br><span class="line"><span class="keyword">where</span> beauty.boyfriend_id<span class="operator">=</span>boys.id</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>：查询员工名和对应的部门名</span><br><span class="line"><span class="keyword">select</span> last_name,department_name</span><br><span class="line"><span class="keyword">from</span> employees,departments</span><br><span class="line"><span class="keyword">where</span> employees.department_id<span class="operator">=</span>departments.department_id;</span><br><span class="line"></span><br><span class="line">#<span class="number">2.</span>为表起别名</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">提高语句的简洁度</span></span><br><span class="line"><span class="comment">区别多个重名的字段</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">注意：如果为表起了别名，则查询的字段就不能用原来的表名去限定</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line">#案例：查询员工名、工种号、工种名</span><br><span class="line"><span class="keyword">select</span> last_name,e.job_id,job_title</span><br><span class="line"><span class="keyword">from</span> employees e,jobs j</span><br><span class="line"><span class="keyword">where</span> e.job_id<span class="operator">=</span>j.job_id;</span><br><span class="line"></span><br><span class="line">#<span class="number">3.</span>两个表的顺序可以调换</span><br><span class="line">#案例：查询员工名、工种号、工种名</span><br><span class="line"><span class="keyword">select</span> last_name,e.job_id,job_title</span><br><span class="line"><span class="keyword">from</span> jobs j，employees e</span><br><span class="line"><span class="keyword">where</span> e.job_id<span class="operator">=</span>j.job_id;</span><br><span class="line"></span><br><span class="line">#<span class="number">4.</span>可以加筛选</span><br><span class="line">#案例<span class="number">1</span>：查询有奖金的员工名、部门名</span><br><span class="line"><span class="keyword">select</span> last_name,department_name,commission_pct</span><br><span class="line"><span class="keyword">from</span> employees e,department d</span><br><span class="line"><span class="keyword">where</span> e.department_id<span class="operator">=</span>d.department_id</span><br><span class="line"><span class="keyword">and</span> e.commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>：查询城市名中第二个字符为o的部门名和城市名</span><br><span class="line"><span class="keyword">select</span> department_name,city</span><br><span class="line"><span class="keyword">from</span> departments d,locations l</span><br><span class="line"><span class="keyword">where</span> d.location_id<span class="operator">=</span>l,location_id</span><br><span class="line"><span class="keyword">and</span> city <span class="keyword">like</span> <span class="string">&#x27;_o%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#<span class="number">5.</span>可以加分组</span><br><span class="line">#案例<span class="number">1</span>：查询每个城市的部门个数</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) 个数,city</span><br><span class="line"><span class="keyword">from</span> departments d,location l</span><br><span class="line"><span class="keyword">where</span> d.location_id<span class="operator">=</span>l.location</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> city;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>：查询有奖金的每个部门的部门名和部门的领导编号和该部门的最低工资</span><br><span class="line"><span class="keyword">select</span> department_name,d.manager_id,<span class="built_in">min</span>(salary)</span><br><span class="line"><span class="keyword">from</span> departments d,employees e</span><br><span class="line"><span class="keyword">where</span> d.department_id<span class="operator">=</span>e.department_id</span><br><span class="line"><span class="keyword">and</span> commission <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_name,d.manager_id;</span><br><span class="line"></span><br><span class="line">#<span class="number">6.</span>可以加排序</span><br><span class="line">#案例：查询每个工种的工种名和员工的个数，并且按员工个数排序</span><br><span class="line"><span class="keyword">select</span> job_title,<span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line"><span class="keyword">from</span> employees e,jobs j</span><br><span class="line"><span class="keyword">where</span> e.job_id<span class="operator">=</span>j.job_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> job_title</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line">#<span class="number">7.</span>可以实现三表连接</span><br><span class="line">#案例：查询员工名、部门名和所在城市</span><br><span class="line"><span class="keyword">select</span> last_name,department_name,city</span><br><span class="line"><span class="keyword">from</span> employees e,departments d,locations l</span><br><span class="line"><span class="keyword">where</span> e.department_id<span class="operator">=</span>d.department_id</span><br><span class="line"><span class="keyword">and</span> d.location_id<span class="operator">=</span>l.location_id;</span><br></pre></td></tr></table></figure>

<h5 id="非等值连接"><a href="#非等值连接" class="headerlink" title="非等值连接"></a>非等值连接</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#非等值连接</span><br><span class="line">#案例<span class="number">1</span>：查询员工的工资和工资级别</span><br><span class="line"><span class="keyword">select</span> salary,grade_level</span><br><span class="line"><span class="keyword">from</span> employees e,job_grades g</span><br><span class="line"><span class="keyword">where</span> salary <span class="keyword">between</span> g.lowest_sal <span class="keyword">and</span> g.highest_sal;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>：查询工资级别为A的员工工资</span><br><span class="line"><span class="keyword">select</span> salary,grade_level</span><br><span class="line"><span class="keyword">from</span> employees e,job_grades g</span><br><span class="line"><span class="keyword">where</span> salary <span class="keyword">between</span> g.lowest_sal <span class="keyword">and</span> g.highest_sal</span><br><span class="line"><span class="keyword">and</span> g.grade_level<span class="operator">=</span><span class="string">&#x27;A&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h5 id="自连接"><a href="#自连接" class="headerlink" title="自连接"></a>自连接</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#案例：查询员工名和上级的名称</span><br><span class="line"><span class="keyword">select</span> e.employee_id,e.last_name,m.employee_id,m.last_name</span><br><span class="line"><span class="keyword">from</span> employees e,employees m</span><br><span class="line"><span class="keyword">where</span> e.manager_id<span class="operator">=</span>m.employee_id;</span><br></pre></td></tr></table></figure>



<h4 id="二、sql99标准"><a href="#二、sql99标准" class="headerlink" title="二、sql99标准"></a>二、sql99标准</h4><h5 id="语法-4"><a href="#语法-4" class="headerlink" title="语法"></a>语法</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> 查询列表</span><br><span class="line"><span class="keyword">from</span> 表<span class="number">1</span> 别名 </span><br><span class="line">[连接类型] <span class="keyword">join</span> 表<span class="number">2</span> 别名</span><br><span class="line"><span class="keyword">on</span> 连接条件</span><br></pre></td></tr></table></figure>

<h5 id="内连接"><a href="#内连接" class="headerlink" title="内连接"></a>内连接</h5><h6 id="语法-5"><a href="#语法-5" class="headerlink" title="语法"></a>语法</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> 查询列表</span><br><span class="line"><span class="keyword">from</span> 表<span class="number">1</span> 别名</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> 表<span class="number">2</span> 别名</span><br><span class="line"><span class="keyword">on</span> 连接条件</span><br><span class="line"><span class="keyword">where</span> 筛选条件</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> 分组列表</span><br><span class="line"><span class="keyword">having</span> 分组后的筛选</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> 排序列表</span><br><span class="line">limit 子句</span><br></pre></td></tr></table></figure>

<h6 id="特点-4"><a href="#特点-4" class="headerlink" title="特点"></a>特点</h6><ol>
<li>可以添加排序、分组、筛选</li>
<li>inner可以省略</li>
<li>筛选条件放在where后面，连接条件放在on后面，提高分离性，便于阅读</li>
<li>inner join连接和sql92语法中的等值连接效果是一样的，都是查询多表的交集</li>
<li>表的顺序可以调换</li>
<li>内连接的结果=多表的交集</li>
<li>n表连接至少需要n—1个连接条件</li>
</ol>
<h6 id="分类-3"><a href="#分类-3" class="headerlink" title="分类"></a>分类</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#<span class="number">1.</span>等值连接</span><br><span class="line"></span><br><span class="line">#案例<span class="number">1</span>：查询员工名、部门名</span><br><span class="line"><span class="keyword">select</span> last_name,department_name</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> departments d</span><br><span class="line"><span class="keyword">on</span> e.department_id<span class="operator">=</span>d.department_id;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>：查询名字中包含e的员工名和工种名（添加筛选）</span><br><span class="line"><span class="keyword">select</span> last_name,job_title</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">inner</span> joim jobs j</span><br><span class="line"><span class="keyword">on</span> e.job_id<span class="operator">=</span>j.job_id</span><br><span class="line"><span class="keyword">where</span> e.last_name <span class="keyword">like</span> <span class="string">&#x27;%e%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">3</span>：查询部门个数<span class="operator">&gt;</span><span class="number">3</span>的城市名和部门个数（添加分组<span class="operator">+</span>筛选）</span><br><span class="line"><span class="keyword">select</span> city,<span class="built_in">count</span>(<span class="operator">*</span>) 部门个数</span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> locations</span><br><span class="line"><span class="keyword">on</span> d.location_id<span class="operator">=</span>l.location_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> city</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">3</span>;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">4</span>：查询哪个部门的员工个数<span class="operator">&gt;</span><span class="number">3</span>的部门名和员工个数，并按个数降序（添加排序）</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>) 个数,department_name</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> departments d</span><br><span class="line"><span class="keyword">on</span> e.department_id<span class="operator">=</span>d.department_id</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_name</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">3</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="built_in">count</span>(<span class="operator">*</span>) <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">5</span>：查询员工名、部门名、工种名，并按部门名降序（三表连接）</span><br><span class="line"><span class="keyword">select</span> last_name,department_name,job_title</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> departments d <span class="keyword">on</span> e.department_id<span class="operator">=</span>d.department_id</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> jobs j <span class="keyword">on</span> e.job_id<span class="operator">=</span>j.job_id</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> department_name <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line">#<span class="number">2.</span>非等值连接</span><br><span class="line"></span><br><span class="line">#案例<span class="number">1</span>：查询员工的工资级别</span><br><span class="line"><span class="keyword">select</span> salary,grade_level</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> job_grades g</span><br><span class="line"><span class="keyword">on</span> e.salary <span class="keyword">between</span> g.lowest_sal <span class="keyword">and</span> g.highest_sal;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>：查询工资级别的个数<span class="operator">&gt;</span><span class="number">20</span>的个数，并且按工资级别降序</span><br><span class="line"><span class="keyword">select</span> count（<span class="operator">*</span>）,grade_level</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> job_grades g</span><br><span class="line"><span class="keyword">on</span> e.salary <span class="keyword">between</span> g.lowest_sal <span class="keyword">and</span> g.highest_sal</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> grade_level</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">count</span>(<span class="operator">*</span>)<span class="operator">&gt;</span><span class="number">20</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> grade_level <span class="keyword">desc</span>;</span><br><span class="line"></span><br><span class="line">#<span class="number">3.</span>自连接</span><br><span class="line"></span><br><span class="line">#案例<span class="number">1</span>：查询员工的名字，上级的名字</span><br><span class="line"><span class="keyword">select</span> e.last_name,m.last_name</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> employees m</span><br><span class="line"><span class="keyword">on</span> e.manager_id<span class="operator">=</span>m.employee_id;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>：查询姓名中包含字符k的员工的名字，上级的名字</span><br><span class="line"><span class="keyword">select</span> e.last_name,m.last_name</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> employees m</span><br><span class="line"><span class="keyword">on</span> e.manager_id<span class="operator">=</span>m.employee_id</span><br><span class="line"><span class="keyword">where</span> e.last_name <span class="keyword">like</span> <span class="string">&#x27;%k%&#x27;</span>;</span><br></pre></td></tr></table></figure>



<h5 id="外连接"><a href="#外连接" class="headerlink" title="外连接"></a>外连接</h5><h6 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h6><p>用于查询一个表中有，另一个表没有的记录</p>
<h6 id="特点-5"><a href="#特点-5" class="headerlink" title="特点"></a>特点</h6><ol>
<li><p>外连接的查询结果为主表中的所有记录</p>
<p>如果从表中有和他匹配的，则显示匹配的值</p>
<p>如果从表中没有和他匹配的，则显示null</p>
<p>外连接查询结果=内连接结果+主表中有而从表中没有的记录</p>
</li>
<li><p>左外连接，lift outer join左边的是主表</p>
<p>右外连接，right outer join右边的是主表</p>
</li>
<li><p>左外和右外交换两个表的顺序，可以实现同样的效果</p>
</li>
<li><p>一般用于查询除了交集部分剩余的不匹配的行</p>
</li>
<li><p>全外连接full outer join=内连接的结果+表1中有但表2中没有的+表2中有但表1中没有的（MySQL不支持）</p>
</li>
</ol>
<h6 id="案例-1"><a href="#案例-1" class="headerlink" title="案例"></a>案例</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#案例<span class="number">1</span>：查询哪个部门没有员工</span><br><span class="line"></span><br><span class="line">#左外</span><br><span class="line"><span class="keyword">select</span> d.<span class="operator">*</span>,e.employee_id</span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> employees e</span><br><span class="line"><span class="keyword">on</span> d.department_id<span class="operator">=</span>e.department_id</span><br><span class="line"><span class="keyword">where</span> e.employee_id <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">#右外</span><br><span class="line"><span class="keyword">select</span> d.<span class="operator">*</span>,e.employee_id</span><br><span class="line"><span class="keyword">from</span> employees e</span><br><span class="line"><span class="keyword">left</span> <span class="keyword">outer</span> <span class="keyword">join</span> departments d</span><br><span class="line"><span class="keyword">on</span> d.department_id<span class="operator">=</span>e.department_id</span><br><span class="line"><span class="keyword">where</span> e.employee_id <span class="keyword">is</span> <span class="keyword">null</span>;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h5 id="交叉连接"><a href="#交叉连接" class="headerlink" title="交叉连接"></a>交叉连接</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> b.<span class="operator">*</span>,bo.<span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> beauty b</span><br><span class="line"><span class="keyword">cross</span> <span class="keyword">join</span> boys bo;</span><br><span class="line">#就是使用sql99语法实现的笛卡尔积</span><br></pre></td></tr></table></figure>



<h3 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h3><h4 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h4><p>出现在其他语句内部的select语句，称为子查询或内查询</p>
<p>内部嵌套其他select语句的查询，称为外查询或主查询</p>
<h4 id="分类-4"><a href="#分类-4" class="headerlink" title="分类"></a>分类</h4><h5 id="按子查询出现的位置"><a href="#按子查询出现的位置" class="headerlink" title="按子查询出现的位置"></a>按子查询出现的位置</h5><p>select 后面：</p>
<p>​                    仅仅支持标量子查询</p>
<p>from后面：</p>
<p>​                    支持表子查询</p>
<p>where或having后面：  ★</p>
<p>​                    标量子查询 （单行）√</p>
<p>​                    列子查询     （多行）√</p>
<p>​                    行子查询</p>
<p>exists后面（相关子查询）</p>
<p>​                    标量子查询 </p>
<p>​                    列子查询</p>
<p>​                    行子查询</p>
<p>​                    表子查询    </p>
<h5 id="按结果集的行列数不同"><a href="#按结果集的行列数不同" class="headerlink" title="按结果集的行列数不同"></a>按结果集的行列数不同</h5><p>标量子查询（结果集只有一行一列）</p>
<p>列子查询（结果集只有一列多行）</p>
<p>行子查询（结果集有一行多列）</p>
<p>表子查询（结果集一般为多行多列）</p>
<h4 id="一、where或having后面"><a href="#一、where或having后面" class="headerlink" title="一、where或having后面"></a>一、where或having后面</h4><h5 id="特点-6"><a href="#特点-6" class="headerlink" title="特点"></a>特点</h5><ol>
<li><p>子查询放在小括号内</p>
</li>
<li><p>子查询一般放在条件的右侧</p>
</li>
<li><p>标量子查询，一般搭配着单行操作符（&lt;、&gt;、&lt;=、&gt;=、=、&lt;&gt;）使用</p>
<p>列子查询，一般搭配着多行操作符（in、any/some、all）使用</p>
</li>
<li><p>子查询的执行优先于主查询执行，主查询的条件用到了子查询的结果</p>
</li>
</ol>
<h5 id="分类-5"><a href="#分类-5" class="headerlink" title="分类"></a>分类</h5><h6 id="标量子查询（单行子查询）"><a href="#标量子查询（单行子查询）" class="headerlink" title="标量子查询（单行子查询）"></a>标量子查询（单行子查询）</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#案例<span class="number">1</span>：谁的工资比Abel高？</span><br><span class="line"></span><br><span class="line">#①查询Abel的工资</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> last_name<span class="operator">=</span><span class="string">&#x27;Abel&#x27;</span></span><br><span class="line">#②查询员工的信息，满足salary<span class="operator">&gt;</span>①结果</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary<span class="operator">&gt;</span>(</span><br><span class="line">		<span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line">		<span class="keyword">from</span> employees</span><br><span class="line">		<span class="keyword">where</span> last_name<span class="operator">=</span><span class="string">&#x27;Abel&#x27;</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>：返回job_id与<span class="number">141</span>号员工相同，salary比<span class="number">143</span>号员工多的员工姓名、job_id和工资</span><br><span class="line"></span><br><span class="line">#①查询<span class="number">141</span>号员工的job_id</span><br><span class="line"><span class="keyword">select</span> job_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> employee_id<span class="operator">=</span><span class="number">141</span></span><br><span class="line">#②查询<span class="number">143</span>号员工的salary</span><br><span class="line"><span class="keyword">select</span> salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> employee_id<span class="operator">=</span><span class="number">143</span></span><br><span class="line">#③查询员工的姓名，job_id,和工资，要求job_id<span class="operator">=</span>①并且salary<span class="operator">&gt;</span>②</span><br><span class="line"><span class="keyword">select</span> last_name,job_id,salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> job_id<span class="operator">=</span>(</span><br><span class="line">        <span class="keyword">select</span> job_id</span><br><span class="line">        <span class="keyword">from</span> employees</span><br><span class="line">        <span class="keyword">where</span> employee_id<span class="operator">=</span><span class="number">141</span></span><br><span class="line">)<span class="keyword">and</span> salary<span class="operator">&gt;</span>(</span><br><span class="line">        <span class="keyword">select</span> salary</span><br><span class="line">        <span class="keyword">from</span> employees</span><br><span class="line">        <span class="keyword">where</span> employee_id<span class="operator">=</span><span class="number">143</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#案例<span class="number">3</span>：返回公司工资最少的员工的last_name,job_id和salary</span><br><span class="line"></span><br><span class="line">#①查询公司的最低工资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line">#②查询last_name,job_id和salary，要求salary<span class="operator">=</span>①</span><br><span class="line"><span class="keyword">select</span> last_name,job_id,salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary<span class="operator">=</span>(</span><br><span class="line">        <span class="keyword">select</span> <span class="built_in">min</span>(salary)</span><br><span class="line">        <span class="keyword">from</span> employees</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#案例<span class="number">4</span>：查询最低工资大于<span class="number">50</span>号部门最低工资的部门id和其最低工资</span><br><span class="line"></span><br><span class="line">#①查询<span class="number">50</span>号部门的最低工资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> department_id<span class="operator">=</span><span class="number">50</span></span><br><span class="line">#②查询每个部门的最低工资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(salary),department_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id</span><br><span class="line">#③在②基础上筛选，满足<span class="built_in">min</span>(salary)<span class="operator">&gt;</span>①</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(salary),department_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id</span><br><span class="line"><span class="keyword">having</span> <span class="built_in">min</span>(salary)<span class="operator">&gt;</span>(</span><br><span class="line">        <span class="keyword">select</span> <span class="built_in">min</span>(salary)</span><br><span class="line">        <span class="keyword">from</span> employees</span><br><span class="line">        <span class="keyword">where</span> department_id<span class="operator">=</span><span class="number">50</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#非法使用标量子查询：子查询结果不是一行一列</span><br></pre></td></tr></table></figure>



<h6 id="列子查询（多行子查询）"><a href="#列子查询（多行子查询）" class="headerlink" title="列子查询（多行子查询）"></a>列子查询（多行子查询）</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#案例<span class="number">1</span>；返回location_id是<span class="number">1400</span>或<span class="number">1700</span>的部门中的所有员工姓名</span><br><span class="line"></span><br><span class="line">#①查询location_id是<span class="number">1400</span>或<span class="number">1700</span>的部门编号</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> department_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> location_id <span class="keyword">in</span>(<span class="number">1400</span>,<span class="number">1700</span>)</span><br><span class="line">#②查询员工姓名，要求部门编号是①列表中的某一个</span><br><span class="line"><span class="keyword">select</span> last_name</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> department_id <span class="keyword">in</span>(</span><br><span class="line">        <span class="keyword">select</span> <span class="keyword">distinct</span> department_id</span><br><span class="line">        <span class="keyword">from</span> employees</span><br><span class="line">        <span class="keyword">where</span> location_id <span class="keyword">in</span>(<span class="number">1400</span>,<span class="number">1700</span>)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>：返回其他工种中比job_id为IT<span class="operator">-</span>PROG工种任一工资低的员工的员工号、姓名、job_id以及salary</span><br><span class="line"></span><br><span class="line">#①查询job_id为IT<span class="operator">-</span>PROG部门的任一工资</span><br><span class="line"><span class="keyword">select</span> <span class="keyword">distinct</span> ssalary </span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> iob_id<span class="operator">=</span><span class="string">&#x27;IT-PROG&#x27;</span></span><br><span class="line">#②查询员工号、姓名、job_id以及salary，salary<span class="operator">&lt;</span>(①)的任意一个</span><br><span class="line"><span class="keyword">select</span> last_name,employee_id,job_id,salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary<span class="operator">&lt;</span><span class="keyword">any</span>(</span><br><span class="line">        <span class="keyword">select</span> <span class="keyword">distinct</span> ssalary </span><br><span class="line">        <span class="keyword">from</span> employees</span><br><span class="line">        <span class="keyword">where</span> iob_id<span class="operator">=</span><span class="string">&#x27;IT_PROG&#x27;</span></span><br><span class="line">)<span class="keyword">and</span> job_id<span class="operator">&lt;&gt;</span><span class="string">&#x27;IT_PROG&#x27;</span>;</span><br><span class="line">#或</span><br><span class="line"><span class="keyword">select</span> last_name,employee_id,job_id,salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary<span class="operator">&lt;</span>(</span><br><span class="line">        <span class="keyword">select</span> <span class="built_in">max</span> (ssalary) </span><br><span class="line">        <span class="keyword">from</span> employees</span><br><span class="line">        <span class="keyword">where</span> iob_id<span class="operator">=</span><span class="string">&#x27;IT_PROG&#x27;</span></span><br><span class="line">)<span class="keyword">and</span> job_id<span class="operator">&lt;&gt;</span><span class="string">&#x27;IT_PROG&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">3</span>：返回其他工种中比job_id为IT<span class="operator">-</span>PROG工种所有工资都低的员工的员工号、姓名、job_id以及salary</span><br><span class="line"><span class="keyword">select</span> last_name,employee_id,job_id,salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary<span class="operator">&lt;</span><span class="keyword">all</span>(</span><br><span class="line">        <span class="keyword">select</span> <span class="keyword">distinct</span> ssalary </span><br><span class="line">        <span class="keyword">from</span> employees</span><br><span class="line">        <span class="keyword">where</span> iob_id<span class="operator">=</span><span class="string">&#x27;IT_PROG&#x27;</span></span><br><span class="line">)<span class="keyword">and</span> job_id<span class="operator">&lt;&gt;</span><span class="string">&#x27;IT_PROG&#x27;</span>;</span><br><span class="line">#或</span><br><span class="line"><span class="keyword">select</span> last_name,employee_id,job_id,salary</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> salary<span class="operator">&lt;</span>(</span><br><span class="line">        <span class="keyword">select</span> <span class="built_in">min</span> (ssalary)</span><br><span class="line">        <span class="keyword">from</span> employees</span><br><span class="line">        <span class="keyword">where</span> iob_id<span class="operator">=</span><span class="string">&#x27;IT_PROG&#x27;</span></span><br><span class="line">)<span class="keyword">and</span> job_id<span class="operator">&lt;&gt;</span><span class="string">&#x27;IT_PROG&#x27;</span>;</span><br></pre></td></tr></table></figure>



<h6 id="行子查询（多列多行）"><a href="#行子查询（多列多行）" class="headerlink" title="行子查询（多列多行）"></a>行子查询（多列多行）</h6><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#案例：查询员工编号最小并且工资最高的员工信息</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> (employee_id,salary)<span class="operator">=</span>(</span><br><span class="line">        <span class="keyword">select</span> <span class="built_in">min</span>(employee_id),<span class="built_in">max</span>(salary)</span><br><span class="line">            <span class="keyword">from</span> employees</span><br><span class="line">);</span><br><span class="line">#——————————————————————————————————————————</span><br><span class="line">#①查询最小的员工编号</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">min</span>(employee_id)</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line">#②查询最高工资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">max</span>(salary)</span><br><span class="line"><span class="keyword">from</span> employess</span><br><span class="line">#③查询员工信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> employess</span><br><span class="line"><span class="keyword">where</span> employee_id<span class="operator">=</span>(</span><br><span class="line">        <span class="keyword">select</span> <span class="built_in">min</span>(employee_id)</span><br><span class="line">        <span class="keyword">from</span> employees</span><br><span class="line">)<span class="keyword">and</span> salary<span class="operator">=</span>(</span><br><span class="line">        <span class="keyword">select</span> <span class="built_in">max</span>(salary)</span><br><span class="line">        <span class="keyword">from</span> employess</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h4 id="二、select-后面"><a href="#二、select-后面" class="headerlink" title="二、select 后面"></a>二、select 后面</h4><p>select 后面仅仅支持标量子查询</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#案例<span class="number">1</span>：查询每个部门的员工个数</span><br><span class="line"><span class="keyword">select</span> d.<span class="operator">*</span>,(</span><br><span class="line">        <span class="keyword">select</span> <span class="built_in">count</span>(<span class="operator">*</span>)</span><br><span class="line">        <span class="keyword">from</span> employees e</span><br><span class="line">        <span class="keyword">where</span> e.department_id<span class="operator">=</span>d.department_id</span><br><span class="line">)个数</span><br><span class="line"><span class="keyword">from</span> departments d;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>：查询员工号<span class="operator">=</span><span class="number">102</span>的部门名</span><br><span class="line"><span class="keyword">select</span> (</span><br><span class="line">   		<span class="keyword">select</span> department_name</span><br><span class="line">        <span class="keyword">from</span> departments d</span><br><span class="line">        <span class="keyword">inner</span> <span class="keyword">join</span> employees e</span><br><span class="line">        <span class="keyword">on</span> d.department_id<span class="operator">=</span>e.department_id</span><br><span class="line">        <span class="keyword">where</span> e.employee_id<span class="operator">=</span><span class="number">102</span></span><br><span class="line">) 部门名；</span><br></pre></td></tr></table></figure>



<h4 id="三、from后面"><a href="#三、from后面" class="headerlink" title="三、from后面"></a>三、from后面</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#案例：查询每个部门的平均工资的工资等级</span><br><span class="line"></span><br><span class="line">#①查询每个部门的平均工资</span><br><span class="line"><span class="keyword">select</span> <span class="built_in">avg</span>(salary),department_id</span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> department_id</span><br><span class="line">#②连接①的结果集和job_grades表，筛选条件平均工资<span class="keyword">between</span> lowest_sal <span class="keyword">and</span> highest_sal</span><br><span class="line"><span class="keyword">select</span> ag_dep.<span class="operator">*</span>,g.grade_level</span><br><span class="line"><span class="keyword">from</span> (</span><br><span class="line">    	<span class="keyword">select</span> <span class="built_in">avg</span>(salary) ag,department_id</span><br><span class="line">        <span class="keyword">from</span> employees</span><br><span class="line">        <span class="keyword">group</span> <span class="keyword">by</span> department_id</span><br><span class="line">) ag_dep</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> job_grades g</span><br><span class="line"><span class="keyword">on</span> ag_dep.ag <span class="keyword">between</span> lowest_sal <span class="keyword">and</span> highest_sal;</span><br></pre></td></tr></table></figure>



<h4 id="四、exists后面"><a href="#四、exists后面" class="headerlink" title="四、exists后面"></a>四、exists后面</h4><p>语法：exists(完整的查询语句)</p>
<p>结果：1或0</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#案例<span class="number">1</span>：查询有员工的部门名</span><br><span class="line"><span class="keyword">select</span> department_name</span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line"><span class="keyword">where</span> <span class="keyword">exists</span>(</span><br><span class="line">    	<span class="keyword">select</span> <span class="operator">*</span></span><br><span class="line">        <span class="keyword">from</span> employees e</span><br><span class="line">        <span class="keyword">where</span> d.department_id<span class="operator">=</span>e.department_id</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">#使用<span class="keyword">in</span></span><br><span class="line"><span class="keyword">select</span> department_name</span><br><span class="line"><span class="keyword">from</span> departments d</span><br><span class="line"><span class="keyword">where</span> d.department_id <span class="keyword">in</span>(</span><br><span class="line">    	<span class="keyword">select</span> department_id</span><br><span class="line">        <span class="keyword">from</span> employees</span><br><span class="line">);</span><br></pre></td></tr></table></figure>



<h3 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h3><h4 id="应用场景-1"><a href="#应用场景-1" class="headerlink" title="应用场景"></a>应用场景</h4><p>当要显示的数据，一页显示不全，需要分页提交sql请求</p>
<h4 id="特点-7"><a href="#特点-7" class="headerlink" title="特点"></a>特点</h4><ol>
<li><p>limit 语句放在查询语句的最后</p>
</li>
<li><p>公式</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#要显示的页数page,每页的条目数size</span><br><span class="line"><span class="keyword">select</span> 查询列表</span><br><span class="line"><span class="keyword">from</span> 表</span><br><span class="line">limit (page—<span class="number">1</span>)<span class="operator">*</span>size,size;</span><br></pre></td></tr></table></figure></li>
</ol>
<h4 id="语法-6"><a href="#语法-6" class="headerlink" title="语法"></a>语法</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">select</span> 查询列表</span><br><span class="line"><span class="keyword">from</span> 表</span><br><span class="line">[</span><br><span class="line">    jion type <span class="keyword">join</span> 表<span class="number">2</span></span><br><span class="line">    <span class="keyword">on</span> 连接条件</span><br><span class="line">    <span class="keyword">where</span> 筛选条件</span><br><span class="line">    <span class="keyword">group</span> <span class="keyword">by</span> 分组字段</span><br><span class="line">    <span class="keyword">having</span> 分组后的筛选</span><br><span class="line">    <span class="keyword">order</span> <span class="keyword">by</span> 排序的字段</span><br><span class="line">]</span><br><span class="line">limit [offest,]size;</span><br><span class="line"></span><br><span class="line">#offest 要显示条目的起始索引（起始索引从<span class="number">0</span>开始）</span><br><span class="line">#size 要显示的条目个数</span><br></pre></td></tr></table></figure>



<h4 id="案例-2"><a href="#案例-2" class="headerlink" title="案例"></a>案例</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#案例<span class="number">1</span>：查询前五条员工信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employees limit <span class="number">0</span>,<span class="number">5</span>;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employees limit <span class="number">5</span>;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>：查询第十一条到第二十五条员工信息</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> employees limit <span class="number">10</span>,<span class="number">15</span>;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">3</span>：查询有奖金的员工信息，并且工资较高的前十名显示出来</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> </span><br><span class="line"><span class="keyword">from</span> employees</span><br><span class="line"><span class="keyword">where</span> commission_pct <span class="keyword">is</span> <span class="keyword">not</span> <span class="keyword">null</span></span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> salary <span class="keyword">desc</span></span><br><span class="line">limit <span class="number">10</span>;</span><br></pre></td></tr></table></figure>



<h3 id="union联合查询"><a href="#union联合查询" class="headerlink" title="union联合查询"></a>union联合查询</h3><h4 id="语法-7"><a href="#语法-7" class="headerlink" title="语法"></a>语法</h4><p>查询语句1</p>
<p>union</p>
<p>查询语句2</p>
<p>union</p>
<p>…</p>
<h4 id="应用场景-2"><a href="#应用场景-2" class="headerlink" title="应用场景"></a>应用场景</h4><p>要查询的结果来自多个表，且多个表没有直接的连接关系，但查询的信息一致时</p>
<h4 id="特点-8"><a href="#特点-8" class="headerlink" title="特点"></a>特点</h4><ol>
<li>要求多条查询语句的查询列数是一致的</li>
<li>要求多条查询语句的查询的每一列的类型和顺序最好一致</li>
<li>union关键字默认去重，如果使用union all可以包含重复项</li>
</ol>
<h4 id="案例-3"><a href="#案例-3" class="headerlink" title="案例"></a>案例</h4><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#案例：查询中国用户中男性信息以及外国用户中男性的用户信息</span><br><span class="line"><span class="keyword">select</span> id,cname,csex <span class="keyword">from</span> t_ca <span class="keyword">where</span> csex<span class="operator">=</span><span class="string">&#x27;男&#x27;</span></span><br><span class="line"><span class="keyword">union</span></span><br><span class="line"><span class="keyword">select</span> t_id,tname,tGender <span class="keyword">from</span> t_ua <span class="keyword">where</span> tGender<span class="operator">=</span><span class="string">&#x27;male&#x27;</span></span><br></pre></td></tr></table></figure>



<h2 id="DML语言的学习"><a href="#DML语言的学习" class="headerlink" title="DML语言的学习"></a>DML语言的学习</h2><p>数据操作语言：</p>
<p>插入：insert</p>
<p>修改：update</p>
<p>删除：delete</p>
<h3 id="一、插入语句"><a href="#一、插入语句" class="headerlink" title="一、插入语句"></a>一、插入语句</h3><h4 id="插入语句方式一"><a href="#插入语句方式一" class="headerlink" title="插入语句方式一"></a>插入语句方式一</h4><h5 id="语法-8"><a href="#语法-8" class="headerlink" title="语法"></a>语法</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名(列名，...) <span class="keyword">values</span>(值<span class="number">1</span>，...)；</span><br></pre></td></tr></table></figure>

<h5 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#<span class="number">1.</span>插入的值的类型要与列的类型一致或兼容</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty(id,name,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">13</span>,<span class="string">&#x27;张三&#x27;</span>，<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;1990-4-23&#x27;</span>,<span class="string">&#x27;18988888888&#x27;</span>,<span class="keyword">null</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">#<span class="number">2.</span>不可以为<span class="keyword">null</span>的列必须插入值，可以为<span class="keyword">null</span>的列如何插入值？</span><br><span class="line">#方式一：</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty(id,name,sex,borndate,phone,photo,boyfriend_id)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">15</span>,<span class="string">&#x27;李四&#x27;</span>，<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;1991-4-23&#x27;</span>,<span class="string">&#x27;18998888888&#x27;</span>,<span class="keyword">null</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">#方式二：</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty(id,name,sex,phone)</span><br><span class="line"><span class="keyword">values</span>(<span class="number">13</span>,<span class="string">&#x27;张三&#x27;</span>，<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;18988888888&#x27;</span>);</span><br><span class="line"></span><br><span class="line">#<span class="number">3.</span>列的顺序可以调换</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty(name,sex,id,phone)</span><br><span class="line"><span class="keyword">values</span>(<span class="string">&#x27;王五&#x27;</span>，<span class="string">&#x27;男&#x27;</span>，<span class="number">16</span>，<span class="string">&#x27;110&#x27;</span>)；</span><br><span class="line"></span><br><span class="line">#<span class="number">4.</span>列数的值和个数必须一致</span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">错误写法</span></span><br><span class="line"><span class="comment">insert into beauty(id,name,sex,borndate,phone,photo,boyfriend_id)</span></span><br><span class="line"><span class="comment">values(15,&#x27;李四&#x27;，&#x27;女&#x27;,&#x27;1991-4-23&#x27;,&#x27;18998888888&#x27;,null);</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line">#<span class="number">5.</span>可以省略列名，默认所有列，而且列的顺序和表中列的顺序一致</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty</span><br><span class="line"><span class="keyword">values</span>(<span class="number">18</span>,<span class="string">&#x27;张飞&#x27;</span>,<span class="string">&#x27;男&#x27;</span>，<span class="keyword">null</span>,<span class="string">&#x27;119&#x27;</span>,<span class="keyword">null</span>,<span class="keyword">null</span>);</span><br></pre></td></tr></table></figure>

<h4 id="插入语句方式二"><a href="#插入语句方式二" class="headerlink" title="插入语句方式二"></a>插入语句方式二</h4><h5 id="语法-9"><a href="#语法-9" class="headerlink" title="语法"></a>语法</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名</span><br><span class="line"><span class="keyword">set</span> 列名<span class="operator">=</span>值，列名<span class="operator">=</span>值，...</span><br></pre></td></tr></table></figure>

<h5 id="案例-4"><a href="#案例-4" class="headerlink" title="案例"></a>案例</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty</span><br><span class="line"><span class="keyword">set</span> id<span class="operator">=</span><span class="number">19</span>,name<span class="operator">=</span><span class="string">&#x27;赵六&#x27;</span>,phone<span class="operator">=</span><span class="string">&#x27;999&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h4 id="插入语句两种方式比较"><a href="#插入语句两种方式比较" class="headerlink" title="插入语句两种方式比较"></a>插入语句两种方式比较</h4><ol>
<li><p>方式一支持插入多行，方式二不支持</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty</span><br><span class="line"><span class="keyword">values</span>(<span class="number">20</span>,<span class="string">&#x27;李华1&#x27;</span>，<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;1991-4-23&#x27;</span>,<span class="string">&#x27;18998888888&#x27;</span>,<span class="keyword">null</span>,<span class="number">2</span>)</span><br><span class="line">,(<span class="number">21</span>,<span class="string">&#x27;李华2&#x27;</span>，<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;1991-4-23&#x27;</span>,<span class="string">&#x27;18998888888&#x27;</span>,<span class="keyword">null</span>,<span class="number">2</span>)</span><br><span class="line">,(<span class="number">22</span>,<span class="string">&#x27;李华3&#x27;</span>，<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;1991-4-23&#x27;</span>,<span class="string">&#x27;18998888888&#x27;</span>,<span class="keyword">null</span>,<span class="number">2</span>)</span><br></pre></td></tr></table></figure></li>
<li><p>方式一支持子查询，方式二不支持</p>
<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#<span class="number">1</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty(id,name,sex,phone)</span><br><span class="line"><span class="keyword">select</span> <span class="number">13</span>,<span class="string">&#x27;张三&#x27;</span>，<span class="string">&#x27;女&#x27;</span>,<span class="string">&#x27;18988888888&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#<span class="number">2</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> beauty(id,name,phone)</span><br><span class="line"><span class="keyword">select</span> id,boyfriend,<span class="string">&#x27;18988888888&#x27;</span></span><br><span class="line"><span class="keyword">from</span> boys <span class="keyword">where</span> id<span class="operator">&lt;</span><span class="number">3</span>;</span><br></pre></td></tr></table></figure></li>
</ol>
<h3 id="二、修改语句"><a href="#二、修改语句" class="headerlink" title="二、修改语句"></a>二、修改语句</h3><h4 id="修改单表的记录★"><a href="#修改单表的记录★" class="headerlink" title="修改单表的记录★"></a>修改单表的记录★</h4><h5 id="语法-10"><a href="#语法-10" class="headerlink" title="语法"></a>语法</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">update</span> 表名</span><br><span class="line"><span class="keyword">set</span> 列<span class="operator">=</span>新值,列<span class="operator">=</span>新值...</span><br><span class="line"><span class="keyword">where</span> 筛选条件</span><br></pre></td></tr></table></figure>

<h5 id="案例-5"><a href="#案例-5" class="headerlink" title="案例"></a>案例</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#案例<span class="number">1</span>：修改beauty表中姓唐的人的电话为<span class="number">13899999999</span></span><br><span class="line"><span class="keyword">update</span> buauty <span class="keyword">set</span> phone <span class="operator">=</span> <span class="string">&#x27;13899999999&#x27;</span></span><br><span class="line"><span class="keyword">where</span> name <span class="keyword">like</span> <span class="string">&#x27;唐%&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>：修改boys表中id为<span class="number">2</span>的名称为张飞，魅力值为<span class="number">10</span></span><br><span class="line"><span class="keyword">update</span> boys <span class="keyword">set</span> boyname<span class="operator">=</span><span class="string">&#x27;张飞&#x27;</span>,usercp<span class="operator">=</span><span class="number">10</span></span><br><span class="line"><span class="keyword">where</span> id<span class="operator">=</span><span class="number">2</span>;</span><br></pre></td></tr></table></figure>



<h4 id="修改多表的记录-补充"><a href="#修改多表的记录-补充" class="headerlink" title="修改多表的记录[补充]"></a>修改多表的记录[补充]</h4><h5 id="语法-11"><a href="#语法-11" class="headerlink" title="语法"></a>语法</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#sql92语法</span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> 表<span class="number">1</span> 别名，表<span class="number">2</span> 别名</span><br><span class="line"><span class="keyword">set</span> 列<span class="operator">=</span>值,...</span><br><span class="line"><span class="keyword">where</span> 连接条件</span><br><span class="line"><span class="keyword">and</span> 筛选条件</span><br><span class="line"></span><br><span class="line">#sql99语法</span><br><span class="line"></span><br><span class="line"><span class="keyword">update</span> 表<span class="number">1</span> 别名</span><br><span class="line"><span class="keyword">inner</span><span class="operator">|</span><span class="keyword">left</span><span class="operator">|</span><span class="keyword">right</span> <span class="keyword">join</span> 表<span class="number">2</span> 别名</span><br><span class="line"><span class="keyword">on</span> 连接条件</span><br><span class="line"><span class="keyword">set</span> 列<span class="operator">=</span>值,...</span><br><span class="line"><span class="keyword">where</span> 筛选条件</span><br></pre></td></tr></table></figure>

<h5 id="案例-6"><a href="#案例-6" class="headerlink" title="案例"></a>案例</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#案例<span class="number">1</span>：修改张无忌的女朋友手机号为<span class="number">114</span></span><br><span class="line"><span class="keyword">update</span> boys bo</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> beauty b <span class="keyword">on</span> bo.id<span class="operator">=</span>b.boyfriend_id</span><br><span class="line"><span class="keyword">set</span> b.phone<span class="operator">=</span><span class="string">&#x27;114&#x27;</span></span><br><span class="line"><span class="keyword">where</span> bo.boyname<span class="operator">=</span><span class="string">&#x27;张无忌&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>：修改没有男朋友的女生的男朋友编号都为<span class="number">2</span></span><br><span class="line"><span class="keyword">update</span> boys bo</span><br><span class="line"><span class="keyword">right</span> <span class="keyword">join</span> beauty b <span class="keyword">on</span> bo.id<span class="operator">=</span>b.boyfriend_id</span><br><span class="line"><span class="keyword">set</span> b.boyfriend_id<span class="operator">=</span><span class="number">2</span></span><br><span class="line"><span class="keyword">where</span> bo.id <span class="keyword">is</span> <span class="keyword">null</span>;</span><br></pre></td></tr></table></figure>



<h3 id="三、删除语句"><a href="#三、删除语句" class="headerlink" title="三、删除语句"></a>三、删除语句</h3><h4 id="删除语句方式一：delete"><a href="#删除语句方式一：delete" class="headerlink" title="删除语句方式一：delete"></a>删除语句方式一：delete</h4><h5 id="语法-12"><a href="#语法-12" class="headerlink" title="语法"></a>语法</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#<span class="number">1.</span>单表的删除★</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 <span class="keyword">where</span> 筛选条件；</span><br><span class="line"></span><br><span class="line">#<span class="number">2.</span>多表的删除[补充]</span><br><span class="line"></span><br><span class="line">#sql92语法：</span><br><span class="line"><span class="keyword">delete</span> 表<span class="number">1</span>的别名,表<span class="number">2</span>的别名</span><br><span class="line"><span class="keyword">from</span> 表<span class="number">1</span> 别名，表<span class="number">2</span> 别名</span><br><span class="line"><span class="keyword">where</span> 连接条件</span><br><span class="line"><span class="keyword">and</span> 筛选条件</span><br><span class="line"></span><br><span class="line">#sql99语法：</span><br><span class="line"><span class="keyword">delete</span> 表<span class="number">1</span>的别名,表<span class="number">2</span>的别名</span><br><span class="line"><span class="keyword">from</span> 表<span class="number">1</span> 别名</span><br><span class="line"><span class="keyword">inner</span><span class="operator">|</span><span class="keyword">left</span><span class="operator">|</span><span class="keyword">right</span> <span class="keyword">join</span> 表<span class="number">2</span> 别名 <span class="keyword">on</span> 连接条件</span><br><span class="line"><span class="keyword">where</span> 筛选条件</span><br></pre></td></tr></table></figure>

<h5 id="案例-7"><a href="#案例-7" class="headerlink" title="案例"></a>案例</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">#<span class="number">1.</span>单表的删除</span><br><span class="line"></span><br><span class="line">#案例：删除手机号以<span class="number">9</span>结尾的女生信息</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> beauty <span class="keyword">where</span> phone <span class="keyword">like</span> <span class="string">&#x27;%9&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#<span class="number">2.</span>多表的删除</span><br><span class="line"></span><br><span class="line">#案例<span class="number">1</span>：删除张无忌的女朋友的信息</span><br><span class="line"><span class="keyword">delete</span> b</span><br><span class="line"><span class="keyword">from</span> beauty b</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> boys bo <span class="keyword">on</span> b.boyfriend_id<span class="operator">=</span>bo.id</span><br><span class="line"><span class="keyword">where</span> bo.boyname<span class="operator">=</span><span class="string">&#x27;张无忌&#x27;</span>;</span><br><span class="line"></span><br><span class="line">#案例<span class="number">2</span>：删除黄晓明的信息以及他女朋友的信息</span><br><span class="line"><span class="keyword">delete</span> b,bo</span><br><span class="line"><span class="keyword">from</span> beauty b</span><br><span class="line"><span class="keyword">inner</span> <span class="keyword">join</span> boys bo <span class="keyword">on</span> b.boyfriend_id<span class="operator">=</span>bo.id</span><br><span class="line"><span class="keyword">where</span> bo.boyname<span class="operator">=</span><span class="string">&#x27;黄晓明&#x27;</span>;</span><br></pre></td></tr></table></figure>



<h4 id="删除语句方式二：truncate"><a href="#删除语句方式二：truncate" class="headerlink" title="删除语句方式二：truncate"></a>删除语句方式二：truncate</h4><h5 id="语法-13"><a href="#语法-13" class="headerlink" title="语法"></a>语法</h5><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表名；</span><br></pre></td></tr></table></figure>

<h4 id="删除语句两种方式的区别-★面试题"><a href="#删除语句两种方式的区别-★面试题" class="headerlink" title="删除语句两种方式的区别[★面试题]"></a>删除语句两种方式的区别[★面试题]</h4><ol>
<li><p>delete可以加where条件，truncate不能加</p>
</li>
<li><p>truncate删除，效率高一丢丢</p>
</li>
<li><p>假如要删除的表中有自增长列，</p>
<p>如果用delete删除后，再插入数据，自增长列的值从断点开始，</p>
<p>而用truncate删除后，再插入数据，自增长列的值从1开始。</p>
</li>
<li><p>truncate删除没有返回值，而delete删除有返回值</p>
</li>
<li><p>truncate删除不能回滚，而delete删除可以回滚</p>
</li>
</ol>
<h2 id="DDL语言的学习"><a href="#DDL语言的学习" class="headerlink" title="DDL语言的学习"></a>DDL语言的学习</h2><h3 id="库和表的管理"><a href="#库和表的管理" class="headerlink" title="库和表的管理"></a>库和表的管理</h3><h3 id="常见数据类型介绍"><a href="#常见数据类型介绍" class="headerlink" title="常见数据类型介绍"></a>常见数据类型介绍</h3><h3 id="常见约束"><a href="#常见约束" class="headerlink" title="常见约束"></a>常见约束</h3><h2 id="TCL语言的学习"><a href="#TCL语言的学习" class="headerlink" title="TCL语言的学习"></a>TCL语言的学习</h2><h3 id="事务和事务处理"><a href="#事务和事务处理" class="headerlink" title="事务和事务处理"></a>事务和事务处理</h3><h2 id="视图的讲解"><a href="#视图的讲解" class="headerlink" title="视图的讲解"></a>视图的讲解</h2><h2 id="存储过程和函数"><a href="#存储过程和函数" class="headerlink" title="存储过程和函数"></a>存储过程和函数</h2><h2 id="流程控制结构"><a href="#流程控制结构" class="headerlink" title="流程控制结构"></a>流程控制结构</h2>]]></content>
      <categories>
        <category>笔记</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
</search>
